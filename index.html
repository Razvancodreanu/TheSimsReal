<!DOCTYPE html>
<html lang="ro">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Sims Real</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f4f8;
            padding: 20px;
            max-width: 500px;
            margin: auto;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }

        .bar-container {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        progress {
            width: 100%;
            height: 20px;
        }

        input[type="number"] {
            width: 100px;
            margin-top: 5px;
            padding: 5px;
        }

        button {
            display: block;
            width: 100%;
            padding: 10px;
            background-color: #0077cc;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
        }

        .suggestions {
            margin-top: 20px;
            padding: 10px;
            background-color: #e0f7fa;
            border-radius: 5px;
            text-align: center;
        }
    </style>
</head>

<body>
    <h1>The Sims Real</h1>

    <!-- Nevoi Personale Extinse -->
    <section>
        <h2>üßç Nevoi Personale</h2>

        <div class="bar-container">
            <label for="food">üçΩÔ∏è Food (3 mese)</label>
            <progress id="food" max="100" value="0"></progress>
            <input type="number" id="foodInput" placeholder="mese azi" />
        </div>

        <div class="bar-container">
            <label for="water">üíß Water (2L)</label>
            <progress id="water" max="100" value="0"></progress>
            <input type="number" id="waterInput" placeholder="litri azi" />
        </div>

        <div class="bar-container">
            <label for="sleep">üò¥ Sleep (8h)</label>
            <progress id="sleep" max="100" value="0"></progress>
            <input type="number" id="sleepInput" placeholder="ore dormite" />
        </div>

        <div class="bar-container">
            <label for="sport">üèÉ Sport (1h)</label>
            <progress id="sport" max="100" value="0"></progress>
            <input type="number" id="sportInput" placeholder="ore activitate" />
        </div>

        <div class="bar-container">
            <label for="steps">üë£ Steps (10.000)</label>
            <progress id="steps" max="100" value="0"></progress>
            <input type="number" id="stepsInput" placeholder="pa»ôi azi" />
        </div>

        <div class="bar-container">
            <label for="nevoi">Scor General Nevoi</label>
            <progress id="nevoi" max="100" value="0"></progress>
        </div>
    </section>

    <!-- Rela»õii -->
    <section>
        <h2>üí¨ Rela»õii</h2>
        <div class="bar-container">
            <label for="relatii">Nivel Rela»õii</label>
            <progress id="relatii" max="100" value="50"></progress>
            <input type="number" id="relatiiInput" placeholder="+/-" />
        </div>
    </section>

    <!-- CarierƒÉ -->
    <section>
        <h2>üíº CarierƒÉ</h2>
        <div class="bar-container">
            <label for="cariera">Nivel CarierƒÉ</label>
            <progress id="cariera" max="100" value="50"></progress>
            <input type="number" id="carieraInput" placeholder="+/-" />
        </div>
    </section>

    <!-- Buton »ôi sugestii -->
    <button onclick="updateBars()">ActualizeazƒÉ</button>
    <div id="suggestions" class="suggestions"></div>

    <!-- Grafic -->
    <canvas id="progressChart" style="margin-top: 20px;"></canvas>

    <script>
        const subNevoi = [
            { id: "food", target: 3 },
            { id: "water", target: 2 },
            { id: "sleep", target: 8 },
            { id: "sport", target: 1 },
            { id: "steps", target: 10000 }
        ];

        const bars = ['nevoi', 'relatii', 'cariera'];

        function updateBars() {
            let total = 0;

            subNevoi.forEach(nevoie => {
                const input = document.getElementById(nevoie.id + "Input");
                const bar = document.getElementById(nevoie.id);
                const val = parseFloat(input.value);
                if (!isNaN(val)) {
                    const percent = Math.min(100, Math.round((val / nevoie.target) * 100));
                    bar.value = percent;
                    localStorage.setItem(nevoie.id, percent);
                    saveHistory(nevoie.id, percent);
                    input.value = "";
                }
                total += parseInt(bar.value);
            });

            const scorGeneral = Math.round(total / subNevoi.length);
            document.getElementById("nevoi").value = scorGeneral;
            localStorage.setItem("nevoi", scorGeneral);
            saveHistory("nevoi", scorGeneral);

            ['relatii', 'cariera'].forEach(bar => {
                const input = document.getElementById(bar + 'Input');
                const progress = document.getElementById(bar);
                const change = parseInt(input.value);
                if (!isNaN(change)) {
                    let newValue = Math.min(100, Math.max(0, progress.value + change));
                    progress.value = newValue;
                    localStorage.setItem(bar, newValue);
                    saveHistory(bar, newValue);
                    input.value = '';
                }
            });

            localStorage.setItem('lastUpdate', new Date().toISOString().split('T')[0]);
            showSuggestions();
            document.getElementById('progressChart').remove();
            const newCanvas = document.createElement('canvas');
            newCanvas.id = 'progressChart';
            newCanvas.style.marginTop = '20px';
            document.body.appendChild(newCanvas);
            updateChart();
        }

        function loadProgress() {
            [...subNevoi.map(n => n.id), ...bars].forEach(bar => {
                const saved = localStorage.getItem(bar);
                if (saved !== null) {
                    document.getElementById(bar).value = parseInt(saved);
                }
            });
            checkDailyDecay();
            updateChart();
            showSuggestions();
        }

        function checkDailyDecay() {
            const today = new Date().toISOString().split('T')[0];
            const lastUpdate = localStorage.getItem('lastUpdate') || today;

            if (lastUpdate !== today) {
                [...subNevoi.map(n => n.id), ...bars].forEach(bar => {
                    const progress = document.getElementById(bar);
                    let newValue = Math.max(0, progress.value - 10);
                    progress.value = newValue;
                    localStorage.setItem(bar, newValue);
                    saveHistory(bar, newValue);
                });
                localStorage.setItem('lastUpdate', today);
            }
        }

        function saveHistory(bar, value) {
            const today = new Date().toISOString().split('T')[0];
            let history = JSON.parse(localStorage.getItem(bar + '_history') || '{}');
            history[today] = value;
            localStorage.setItem(bar + '_history', JSON.stringify(history));
        }

        function updateChart() {
            const ctx = document.getElementById('progressChart').getContext('2d');
            const dates = [];
            const data = {};

            [...subNevoi.map(n => n.id), ...bars].forEach(bar => data[bar] = []);

            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                dates.push(date.toISOString().split('T')[0]);
            }

            [...subNevoi.map(n => n.id), ...bars].forEach(bar => {
                const history = JSON.parse(localStorage.getItem(bar + '_history') || '{}');
                dates.forEach(date => {
                    data[bar].push(history[date] || 0);
                });
            });

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: [...subNevoi.map(n => ({
                        label: n.id.charAt(0).toUpperCase() + n.id.slice(1),
                        data: data[n.id],
                        borderColor: randomColor(),
                        backgroundColor: 'rgba(0,0,0,0.1)',
                        fill: true
                    })), {
                        label: 'Nevoi Generale',
                        data: data.nevoi,
                        borderColor: '#ff6384',
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        fill: true
                    }, {
                        label: 'Rela»õii',
                        data: data.relatii,
                        borderColor: '#36a2eb',
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        fill: true
                    }, {
                        label: 'CarierƒÉ',
                        data: data.cariera,
                        borderColor: '#4bc0c0',
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
        }

        function randomColor() {
            const colors = ['#ff6384', '#36a2eb', '#4bc0c0', '#9966ff', '#ff9f40'];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        function showSuggestions() {
            const suggestions = [];

            subNevoi.forEach(n => {
                const val = parseInt(document.getElementById(n.id).value);
                if (val < 50) {
                    if (n.id === 'food') suggestions.push('üçΩÔ∏è MƒÉn√¢ncƒÉ o masƒÉ sƒÉnƒÉtoasƒÉ!');
                    if (n.id === 'water') suggestions.push('üíß Bea mai multƒÉ apƒÉ!');
                    if (n.id === 'sleep') suggestions.push('üò¥ Dormi mai mult!');
                    if (n.id === 'sport') suggestions.push('üèÉ FƒÉ pu»õinƒÉ mi»ôcare!');
                    if (n.id === 'steps') suggestions.push('üë£ Ie»ôi la o plimbare!');
                }
            });

            const relatiiVal = parseInt(document.getElementById('relatii').value);
            const carieraVal = parseInt(document.getElementById('cariera').value);

            if (relatiiVal < 50) suggestions.push('üí¨ Rela»õii jos: sunƒÉ un prieten!');
            if (carieraVal < 50) suggestions.push('üíº CarierƒÉ jos: fƒÉ un pas mic azi!');

            const suggestionDiv = document.getElementById('suggestions');
            suggestionDiv.textContent = suggestions.length > 0 ? suggestions.join(' ') : 'Totul e echilibrat!';
        }

        window.onload = () => {
            loadProgress();
        };
    </script>
</body>

</html>